# Forms & User Input

-   Most web applications are mostly forms
-   The most difficult part is to provide feedback to the user
-   Form can have multiple states, beyond valid and invalid
-   Forms also need multiple validations
    -   When a form is submitted
        -   Wait until is done before warning their
        -   Avoid unnecessary warnings
    -   When the input looses focus
        -   Allows to enter a valid value before warning
    -   On every keystroke
        -   Direct feedback on input

## Input values

-   Can be handled as state or as values, it depends on what do you want to do with them
-   If you need to do something with the value on every keystroke value is better choice
-   If you just need to send the final output you might go with ref
-   The main idea is to let React manipulate the DOM, avoiding the use of `inputRef.current?.value` is a better practice

    ```TSX
    // Ref
    const SimpleInput = () => {
        const inputRef = useRef<HTMLInputElement>(null),
            handleNameChange = () => {
                console.log(inputRef.current?.value);
            },
            submitHandler: FormEventHandler<HTMLFormElement> = (event: FormEvent) => {
                event.preventDefault();
                const inputValue = inputRef.current?.value;
            };

        return (
            <form onSubmit={submitHandler}>
                <label htmlFor='name'>Your Name</label>
                <input type='text' id='name' onChange={handleNameChange} ref={inputRef} />
                <button>Submit</button>
            </form>
        );
    };
    ```

    ```TSX
    const BasicForm = () => {
        const [enteredName, setEnteredName] = useState<string>(""),
            nameInputChangeHandler: ChangeEventHandler<HTMLInputElement> = (event: ChangeEvent<HTMLInputElement>) => {
                setEnteredName(event.target.value);
            },
            submitHandler: FormEventHandler<HTMLFormElement> = (event: FormEvent) => {
               event.preventDefault();
            };

        return (
            <form onSubmit={submitHandler}>
                <label htmlFor='name'>First Name</label>
                <input type='text' id='name' onChange={nameInputChangeHandler} value={enteredName} />
                <button>Submit</button>
            </form>
        );
    };
    ```

## Validation

-   In the frontend is always useful for user experience
-   It always need to have server validation to avoid security issues

    ```TSX
    const nameInputValidator = (name: string) => {
        return /^\p{L}[\p{L}\.\s]*$/u.test(name);
    }
    const SimpleInput = () => {
        const [nameInput, setNameInput] = useState<string>(''),
            [nameInputIsValid, setNameInputIsValid] = useState<boolean>(true),
            handleNameChange: ChangeEventHandler<HTMLInputElement> = (event: ChangeEvent<HTMLInputElement>) => {
                setNameInput(event.target?.value);
                setNameInputIsValid(nameInputValidator(event.target?.value));
            },
            submitHandler: FormEventHandler<HTMLFormElement> = (event: FormEvent) => {
                event.preventDefault();
                if (!nameInput.trim()) {
                    alert('Please enter a name');
                    return;
                }
                console.log(nameInput);
            };

        return (
            <form onSubmit={submitHandler}>
            <div className={clsx('form-control', {
                invalid: !nameInputIsValid,
            })}>
                <label htmlFor='name'>Your Name</label>
                <input
                type='text'
                id='name'
                onChange={handleNameChange}
                value={nameInput}
                />
                {!nameInputIsValid ? <p className="error-text">Invalid input!</p> : null}
            </div>
            <div className="form-actions">
                <button>Submit</button>
            </div>
            </form >
        );
    };
    ```
